/*
 * Copyright (c) 2007 NVIDIA Corporation.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
 */

import nvrm_init.idl;
import nvrm_module.idl;

package NvRm;

interface nvrm_analog {

/!
#include "nvodm_query.h"
!/

/!
/**
 * List of controllable analog interfaces.  Multiple instances of any
 * particlar interface will be handled by the NVRM_ANALOG_INTERFACE macro
 * below.
 */
!/
enum NvRmAnalogInterface
{
    NvRmAnalogInterface_Dsi,
    NvRmAnalogInterface_ExternalMemory,
    NvRmAnalogInterface_Hdmi,
    NvRmAnalogInterface_Lcd,
    NvRmAnalogInterface_Uart,
    NvRmAnalogInterface_Usb,
    NvRmAnalogInterface_Sdio,
    NvRmAnalogInterface_Tv,
    NvRmAnalogInterface_VideoInput,
}

/!
/**
 * Defines the USB Line state 
 */
!/ 
enum NvRmUsbLineStateType
{
    NvRmUsbLineStateType_SE0 = 0,
    NvRmUsbLineStateType_SJ  = 1,
    NvRmUsbLineStateType_SK  = 2,
    NvRmUsbLineStateType_SE1 = 3,
}

/!
/**
 * List of analog TV DAC type
 */
!/
enum NvRmAnalogTvDacType
{
    NvRmAnalogTvDacType_CRT,
    NvRmAnalogTvDacType_SDTV,
    NvRmAnalogTvDacType_HDTV,
}


/!
/**
 * Create an analog interface id with multiple instances.
 */
#define NVRM_ANALOG_INTERFACE( id, instance ) \
    ((NvRmAnalogInterface)( (instance) << 16 | id ))

/**
 * Get the interface id.
 */
#define NVRM_ANALOG_INTERFACE_ID( id ) ((id) & 0xFFFF)

/**
 * Get the interface instance.
 */
#define NVRM_ANALOG_INTERFACE_INSTANCE( id ) (((id) >> 16) & 0xFFFF)
!/

/!
/**
 * Control I/O pads, DACs, or PHYs, either enable or disable, with an optional
 * configuration structure, which may be defined per module.
 *
 * @param hDevice Handle to the RM device
 * @param Interface The physical interface to configure
 * @param Enable enable/disable bit
 * @param Config extra configuration options for each module, if necessary
 * @param ConfigLength the size in bytes of the configuration structure
 */
!/
NvError
NvRmAnalogInterfaceControl(
    [in] NvRmDeviceHandle hDevice,
    [in] NvRmAnalogInterface Interface,
    [in] NvBool Enable,
    [inout, count(ConfigLength)] voidptr Config,
    [in] NvU32 ConfigLength );

/!
/**
 * Get TV DAC Configuration
 *
 * @param hDevice Handle to the RM device
 * @param Type The analog TV DAC type 
 * @return The analog TV DAC Configuration value
 */
!/
NvU8
NvRmAnalogGetTvDacConfiguration(
    [in] NvRmDeviceHandle hDevice,
    [in] NvRmAnalogTvDacType Type); 

/!
/**
 * Detect if USB is connected or not
 *
 * @param hDevice Handle to the RM device
 * @return TRUE means USB is connected
 */
!/ 
NvBool
NvRmUsbIsConnected(
    [in] NvRmDeviceHandle hDevice);

/!
/**
 * Detect charger type
 *
 * @param hDevice Handle to the RM device
 * @param wait Delay time and ready to get the correct charger type
 * @return USB charger type
 */
!/
NvU32
NvRmUsbDetectChargerState(
    [in] NvRmDeviceHandle hDevice,
    [in] NvU32 wait);

/!
/**
 * Extended configuration structures for NvRmAnalogInterfaceControl.
 */
!/
struct NvRmAnalogTvDacConfig
{
    /!
    /* The DAC input source, may be a Display controller or the TVO engine */
    !/
    NvRmModuleID Source;

    /!
    /* The DAC output amplitude */
    !/
    NvU8 DacAmplitude;
}


/!
/**
 * List of USB analog status check parameters
 */
!/
enum NvRmAnalogUsbInputParam
{
    NvRmAnalogUsbInputParam_CheckCableStatus,
    NvRmAnalogUsbInputParam_CheckChargerStatus,
    NvRmAnalogUsbInputParam_CheckIdStatus,    
    NvRmAnalogUsbInputParam_WaitForPhyClock,
    NvRmAnalogUsbInputParam_ConfigureUsbPhy,
    NvRmAnalogUsbInputParam_ChargerDetection,
    NvRmAnalogUsbInputParam_SetUlpiNullTrimmers,
    NvRmAnalogUsbInputParam_ConfigureUlpiNullClock,
    NvRmAnalogUsbInputParam_SetNullUlpiPinMux,
    NvRmAnalogUsbInputParam_SetUlpiLinkTrimmers,
    NvRmAnalogUsbInputParam_VbusInterrupt,
    NvRmAnalogUsbInputParam_IdInterrupt,
}


/!
/**
 * Extended configuration structures for NvRmAnalogInterfaceControl for USB.
 */
!/
struct NvRmAnalogUsbConfig
{
    /!
    /* The USB Status check parameter */
    !/
    NvRmAnalogUsbInputParam InParam;
    NvBool UsbCableDetected;
    NvBool UsbChargerDetected;
    NvBool UsbIdDetected;
}

} // end nvrm_analog
